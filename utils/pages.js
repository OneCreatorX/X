export function getInitialPage() {
  return `<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SecureAccess Enhanced</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background:#0a1628;color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}.container{background:rgba(26,35,50,0.9);border-radius:15px;padding:30px;max-width:600px;width:100%}.header{text-align:center;margin-bottom:30px}h1{color:#00d4ff;font-size:28px;margin-bottom:10px}.card{background:rgba(36,52,71,0.8);border-radius:10px;padding:20px;margin-bottom:20px;border-left:4px solid #00d4ff}.card-title{color:#00d4ff;font-size:18px;font-weight:bold;margin-bottom:15px}.card-text{color:#e6f3ff;line-height:1.6;margin-bottom:10px}.step{display:flex;align-items:center;margin-bottom:10px}.step-num{background:#00d4ff;color:#0a1628;width:25px;height:25px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;margin-right:10px;font-size:12px}.enhanced{border-left-color:#00ff88;background:linear-gradient(45deg,rgba(0,255,136,0.1),rgba(0,212,255,0.1))}.enhanced .card-title{color:#00ff88}</style></head><body><div class="container"><div class="header"><h1>SecureAccess Enhanced</h1><p style="color:#b3d9ff">Advanced Multi-Stage Verification System</p></div><div class="card enhanced"><div class="card-title">üîí Enhanced Security Active</div><div class="card-text">Advanced multi-stage verification with IPv4/IPv6 support.</div></div><div class="card"><div class="card-title">Instructions</div><div class="step"><div class="step-num">1</div><div class="card-text">Execute in Roblox: loadstring(game:HttpGet("https://DOMAIN/init"))()</div></div><div class="step"><div class="step-num">2</div><div class="card-text">Wait for GUI to load and copy verification URL</div></div><div class="step"><div class="step-num">3</div><div class="card-text">Return to browser and complete 2 verification steps</div></div><div class="step"><div class="step-num">4</div><div class="card-text">Access will be granted automatically after completion</div></div></div></div></body></html>`
}

export function getStatusPage(h, n, svcs, cip, rip, comp, tc, ifc, domain, reqComp) {
  const ps = typeof svcs === 'string' ? JSON.parse(svcs || '{}') : svcs || {}
  const lvc = ps.linkvertise || 0
  const lc = ps.lootlabs || 0
  const ipv = cip.includes(':') ? 6 : 4
  const ripv = rip.includes(':') ? 6 : 4
  
  let cm = ""
  if (comp) {
    cm = `<div class="card success"><div class="card-title">Step ${tc}/2 Completed!</div><div class="card-text">You completed ${comp}! Total progress: ${tc}/${reqComp}</div>${tc >= reqComp ? '<div class="card-text">‚úÖ Registration completed! 50-hour access granted.</div>' : '<div class="card-text">‚ö†Ô∏è Complete one more verification to get full access.</div>'}</div>`
  }
  
  const st = ifc ? "‚úÖ Fully Registered - 50 Hour Access Active" : `‚è≥ Progress: ${tc}/${reqComp} steps completed`
  const ims = cip === rip ? "Exact Match" : "Range Match"
  const dcip = "Hidden"
  const drip = "Hidden"

  return `<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SecureAccess Enhanced</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background:#0a1628;color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}.container{background:rgba(26,35,50,0.9);border-radius:15px;padding:30px;max-width:600px;width:100%}.header{text-align:center;margin-bottom:30px}h1{color:#00d4ff;font-size:28px;margin-bottom:10px}.card{background:rgba(36,52,71,0.8);border-radius:10px;padding:20px;margin-bottom:20px;border-left:4px solid #00d4ff}.card.success{border-left-color:#00cc66}.card-title{color:#00d4ff;font-size:18px;font-weight:bold;margin-bottom:15px}.success .card-title{color:#00cc66}.card-text{color:#e6f3ff;line-height:1.6;margin-bottom:10px}.success .card-text{color:#00cc66}.service-card{background:rgba(36,52,71,0.8);border-radius:10px;padding:20px;margin-bottom:15px;cursor:pointer;border:2px solid transparent;transition:all 0.3s}.service-card:hover{border-color:#00d4ff;transform:translateY(-2px)}.service-card.completed{border-color:#00cc66}.service-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.service-name{font-size:18px;font-weight:bold}.service-status{padding:5px 10px;border-radius:15px;font-size:12px;font-weight:bold}.service-status.completed{background:rgba(0,204,102,0.2);color:#00cc66}.service-status.available{background:rgba(0,212,255,0.2);color:#00d4ff}.service-status.support{background:rgba(255,165,0,0.2);color:#ffa500}.service-desc{color:#b3d9ff;font-size:14px}.enhanced-badge{background:linear-gradient(45deg,#00ff88,#00d4ff);color:#0a1628;padding:5px 10px;border-radius:15px;font-size:10px;font-weight:bold;margin-left:10px}.progress-bar{background:rgba(0,0,0,0.3);border-radius:10px;height:20px;margin:10px 0;overflow:hidden}.progress-fill{background:linear-gradient(45deg,#00d4ff,#00ff88);height:100%;transition:width 0.3s;border-radius:10px}</style></head><body><div class="container"><div class="header"><h1>SecureAccess Enhanced</h1><p style="color:#00d4ff;font-size:18px">Welcome, ${n}! <span class="enhanced-badge">VERIFIED</span></p></div>${cm}<div class="card"><div class="card-title">üîí Security Status</div><div class="card-text">IP Match: ${ims}</div><div class="card-text">Current IP: ${dcip}</div><div class="card-text">Registration IP: ${drip}</div><div class="card-text">Status: ${st}</div><div class="card-text">Network Support: IPv4/IPv6 Compatible</div><div class="progress-bar"><div class="progress-fill" style="width: ${(tc / reqComp) * 100}%"></div></div><div class="card-text" style="text-align:center">${tc}/${reqComp} Steps Completed</div></div><p style="text-align:center;margin-bottom:20px;color:#e6f3ff">${ifc ? "Services available for developer support:" : "Complete any verification service:"}</p><div class="service-card" onclick="os('linkvertise', '${h}')"><div class="service-header"><div class="service-name">üîó Linkvertise</div><div class="service-status ${ifc ? "support" : lvc > 0 ? "completed" : "available"}">${ifc ? "Dev Support" : lvc > 0 ? `Step ${Math.min(lvc, reqComp)}/${reqComp}` : "Available"}</div></div><div class="service-desc">${ifc ? "Available for developer support (no additional time granted)" : "Complete Linkvertise verification (8-45 seconds)"}</div></div><div class="service-card" onclick="os('lootlabs', '${h}')"><div class="service-header"><div class="service-name">üéÅ Lootlabs</div><div class="service-status ${ifc ? "support" : lc > 0 ? "completed" : "available"}">${ifc ? "Dev Support" : lc > 0 ? `Step ${Math.min(lc, reqComp)}/${reqComp}` : "Available"}</div></div><div class="service-desc">${ifc ? "Available for developer support (no additional time granted)" : "Complete Lootlabs verification (8 seconds - 3 minutes)"}</div></div></div><script>function os(svc, h){window.location.href='/verify/'+svc+'?hwid='+encodeURIComponent(h);}</script></body></html>`
}

export function getServiceVerificationPage(h, n, su, cs, ts, isp = false, sn = "Linkvertise", lvProject) {
  const si = isp ? "Developer Support Access" : `Step ${cs}/${ts} - Advanced Verification`
  const il = sn === "Linkvertise"
  const tr = il ? "8-45 seconds" : "8 seconds - 3 minutes"
  const sic = il ? "üîó" : "üéÅ"
  
  return `<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SecureAccess Enhanced</title>${il ? '<script src="https://publisher.linkvertise.com/cdn/linkvertise.js"></script>' : ""}${il ? `<script>linkvertise(${lvProject}, {whitelist: [], blacklist: [""]});</script>` : ""}<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background:#0a1628;color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}.container{background:rgba(26,35,50,0.9);border-radius:15px;padding:30px;max-width:600px;width:100%}.header{text-align:center;margin-bottom:30px}h1{color:#00d4ff;font-size:28px;margin-bottom:10px}.card{background:rgba(36,52,71,0.8);border-radius:10px;padding:20px;margin-bottom:20px;border-left:4px solid #00d4ff}.card-text{color:#b3d9ff;line-height:1.6;margin-bottom:10px}.button{background:linear-gradient(45deg,#00d4ff,#00ff88);color:#0a1628;border:none;padding:15px 30px;border-radius:10px;font-size:16px;font-weight:bold;cursor:pointer;width:100%;text-decoration:none;display:block;text-align:center}.button:hover{transform:translateY(-2px)}.button.support{background:linear-gradient(45deg,#ffa500,#ff6b35)}.enhanced-badge{background:linear-gradient(45deg,#00ff88,#00d4ff);color:#0a1628;padding:5px 10px;border-radius:15px;font-size:10px;font-weight:bold;margin-left:10px}.step-indicator{text-align:center;margin-bottom:20px;color:#00d4ff;font-size:18px;font-weight:bold}</style></head><body><div class="container"><div class="header"><h1>SecureAccess Enhanced</h1><p style="color:#00d4ff;font-size:18px">Welcome, ${n}! <span class="enhanced-badge">VERIFIED</span></p></div><div class="step-indicator">${si}</div><div class="card"><div class="card-text"><strong>${sic} ${sn} Verification</strong></div><div class="card-text"><strong>Time Requirement:</strong> Complete in ${tr}</div><div class="card-text"><strong>Security:</strong> Advanced timing validation</div><div class="card-text"><strong>Network:</strong> IPv4/IPv6 compatible</div>${isp ? '<div class="card-text"><strong>Note:</strong> This is for developer support only - no additional access time granted</div>' : ""}</div><a href="${su}" class="button ${isp ? "support" : ""}" target="_blank">${sic} Complete ${isp ? "Support" : "Verification"} Step</a></div></body></html>`
}

export function getCompletePage(n, exp, rt) {
  const rem = exp - Date.now()
  const ts = formatTime(rem)
  const rd = new Date(rt).toLocaleString()
  
  return `<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SecureAccess Enhanced</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background:#0a1628;color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px}.container{background:rgba(26,35,50,0.9);border-radius:15px;padding:30px;max-width:600px;width:100%}.header{text-align:center;margin-bottom:30px}h1{color:#00d4ff;font-size:28px;margin-bottom:10px}.card{background:rgba(36,52,71,0.8);border-radius:10px;padding:20px;margin-bottom:20px;border-left:4px solid #00cc66}.card-title{color:#00cc66;font-size:18px;font-weight:bold;margin-bottom:15px}.card-text{color:#e6f3ff;line-height:1.6;margin-bottom:10px}.success-icon{text-align:center;font-size:48px;color:#00cc66;margin-bottom:20px}.time-remaining{font-size:20px;color:#00cc66;font-weight:bold;text-align:center;margin:10px 0}.enhanced-badge{background:linear-gradient(45deg,#00ff88,#00d4ff);color:#0a1628;padding:5px 10px;border-radius:15px;font-size:10px;font-weight:bold;margin-left:10px}.service-card{background:rgba(36,52,71,0.8);border-radius:10px;padding:20px;margin-top:20px;cursor:pointer;border:2px solid #00ff88;transition:all 0.3s}.service-card:hover{transform:translateY(-2px)}.service-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.service-name{font-size:18px;font-weight:bold}.service-status{padding:5px 10px;border-radius:15px;font-size:12px;font-weight:bold;background:rgba(0,255,136,0.2);color:#00ff88}.service-desc{color:#b3d9ff;font-size:14px}</style></head><body><div class="container"><div class="header"><h1>SecureAccess Enhanced</h1><p style="color:#00d4ff;font-size:18px">Welcome back, ${n}! <span class="enhanced-badge">VERIFIED</span></p></div><div class="success-icon">‚úÖ</div><div style="text-align:center;font-size:20px;color:#00cc66;font-weight:bold;margin-bottom:20px">üîí 50-Hour Access Granted!</div><div class="card"><div class="card-title">Access Information</div><div class="card-text">Your 50-hour access is valid for:</div><div class="time-remaining">${ts}</div><div class="card-text">Registered: ${rd}</div><div class="card-text">Expires: ${new Date(exp).toLocaleString()}</div><div class="card-text">Network Support: IPv4/IPv6 Compatible</div></div><div class="service-card" onclick="os('linkvertise', '${n}')"><div class="service-header"><div class="service-name">üîó Linkvertise</div><div class="service-status">Available</div></div><div class="service-desc">Service available for developer support</div></div><div class="service-card" onclick="os('lootlabs', '${n}')"><div class="service-header"><div class="service-name">üéÅ Lootlabs</div><div class="service-status">Available</div></div><div class="service-desc">Service available for developer support</div></div></div><script>function os(svc, h){window.location.href='/verify/'+svc+'?hwid='+encodeURIComponent(h);}</script></body></html>`
}

function formatTime(ms) {
  const h = Math.floor(ms / 3600000)
  const m = Math.floor((ms % 3600000) / 60000)
  if (h > 0) return h + "h " + m + "m"
  else if (m > 0) return m + "m"
  else return Math.floor(ms / 1000) + "s"
}
